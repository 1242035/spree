<%= render partial: 'viauco/admin/shared/order_tabs', locals: { current: :payments } %>

<% content_for :page_title do %>
  /
  <%= I18n.t(:one, scope: "activerecord.models.viauco/payment") %>
  /
  <%= payment_method_name(@payment) %>
  /
  <span class="state <%= @payment.state %>">
    <%= Viauco.t(@payment.state, scope: :payment_states, default: @payment.state.capitalize) %>
  </span>
<% end %>

<% content_for :page_actions do %>
  <%= button_link_to Viauco.t(:logs), viauco.admin_order_payment_log_entries_url(@order, @payment), icon: 'file' %>
<% end %>

<%= render partial: "viauco/admin/payments/source_views/#{@payment.payment_method.method_type}",
           locals: {
             payment: @payment.source.is_a?(Viauco::Payment) ? @payment.source : @payment
           }
%>

<div class="alert alert-success" data-hook="amount">
  <%= Viauco.t(:amount) %>: <%= @payment.display_amount.to_html %>
</div>

<%= render 'viauco/admin/payments/capture_events' %>
